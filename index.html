<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ski-Adventskalender f√ºr Johanna ‚õ∑Ô∏è</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(180deg, #0ea5e9 0%, #38bdf8 30%, #e0f2fe 60%, #ffffff 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::after {
            content: '';
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 150px;
            background: linear-gradient(180deg, transparent 0%, #ffffff 40%, #f0f9ff 100%);
            pointer-events: none;
            z-index: 0;
        }

        body::before {
            content: '';
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 300px;
            background: 
                linear-gradient(135deg, transparent 30%, #94a3b8 30%, #cbd5e1 50%, #f1f5f9 70%),
                linear-gradient(225deg, transparent 30%, #64748b 30%, #94a3b8 50%, #e2e8f0 70%);
            background-size: 50% 100%;
            background-position: left bottom, right bottom;
            background-repeat: no-repeat;
            opacity: 0.3;
            pointer-events: none;
            z-index: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        /* Christmas Quote Banner */
        .quote-banner {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 50%, #991b1b 100%);
            color: white;
            padding: 20px 25px;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(220, 38, 38, 0.3);
            border: 3px solid #fca5a5;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .quote-banner::before {
            content: '‚ùÑÔ∏è';
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2rem;
            opacity: 0.5;
        }

        .quote-banner::after {
            content: '‚ùÑÔ∏è';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2rem;
            opacity: 0.5;
        }

        .quote-text {
            font-size: 1.1rem;
            font-style: italic;
            font-weight: 500;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            line-height: 1.5;
        }

        @media (min-width: 768px) {
            .quote-text {
                font-size: 1.3rem;
            }
        }

        /* Weather Section */
        .weather-section {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 25px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border: 3px solid #7dd3fc;
        }

        .weather-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #0c4a6e;
            margin-bottom: 15px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .weather-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        @media (min-width: 768px) {
            .weather-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .weather-card {
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
            padding: 20px;
            border-radius: 20px;
            text-align: center;
            border: 3px solid #7dd3fc;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .weather-location {
            font-size: 1.2rem;
            font-weight: bold;
            color: #0c4a6e;
            margin-bottom: 10px;
        }

        .weather-icon {
            font-size: 3rem;
            margin: 10px 0;
        }

        .weather-temp {
            font-size: 2rem;
            font-weight: bold;
            color: #0284c7;
            margin: 10px 0;
        }

        .weather-description {
            font-size: 1rem;
            color: #0369a1;
            font-weight: 500;
            margin-bottom: 10px;
        }

        .weather-details {
            display: flex;
            justify-content: space-around;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 2px solid #bae6fd;
        }

        .weather-detail {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .weather-detail-icon {
            font-size: 1.2rem;
        }

        .weather-detail-value {
            font-size: 0.9rem;
            color: #0369a1;
            font-weight: 600;
        }

        .weather-loading {
            text-align: center;
            color: #0369a1;
            font-size: 1.1rem;
            padding: 20px;
        }

        .weather-error {
            text-align: center;
            color: #dc2626;
            font-size: 1rem;
            padding: 15px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 30px;
            color: #0c4a6e;
            background: rgba(255, 255, 255, 0.9);
            padding: 30px 20px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 3px solid #bae6fd;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.8);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-top: 10px;
            color: #0369a1;
        }

        .ski-icon {
            font-size: 2.5rem;
            margin: 15px 0;
        }

        @media (min-width: 768px) {
            .header h1 {
                font-size: 3rem;
            }
            .header p {
                font-size: 1.5rem;
            }
        }

        /* Progress Section */
        .progress-section {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 25px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border: 3px solid #7dd3fc;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .progress-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #0c4a6e;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .progress-stats {
            font-size: 1.1rem;
            color: #0369a1;
            font-weight: 600;
        }

        .progress-bar-container {
            width: 100%;
            height: 35px;
            background: linear-gradient(180deg, #bae6fd 0%, #e0f2fe 100%);
            border-radius: 20px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 3px 6px rgba(0, 0, 0, 0.15);
            border: 2px solid #7dd3fc;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #0284c7 0%, #0ea5e9 50%, #38bdf8 100%);
            border-radius: 18px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(2, 132, 199, 0.4);
        }

        .progress-bar::after {
            content: '‚õ∑Ô∏è';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
        }

        .progress-percentage {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            color: #0c4a6e;
            font-size: 0.95rem;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        @media (min-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .stat-card {
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
            padding: 15px;
            border-radius: 20px;
            text-align: center;
            border: 3px solid #7dd3fc;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #0284c7;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #0c4a6e;
            font-weight: 600;
        }

        /* Calendar Grid */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 40px;
        }

        @media (min-width: 500px) {
            .calendar-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 15px;
            }
        }

        @media (min-width: 768px) {
            .calendar-grid {
                grid-template-columns: repeat(6, 1fr);
                gap: 20px;
            }
        }

        .door {
            aspect-ratio: 1;
            border-radius: 20px;
            position: relative;
            border: 4px solid #7dd3fc;
            overflow: hidden;
            text-decoration: none;
            display: block;
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 50%, #e0f2fe 100%);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15), inset 0 2px 8px rgba(255, 255, 255, 0.5);
            transition: all 0.2s ease;
        }

        .door.opened {
            background: linear-gradient(135deg, #0ea5e9 0%, #38bdf8 50%, #7dd3fc 100%);
            border-color: #0284c7;
        }

        .door:hover {
            transform: scale(1.05) translateY(-5px) rotate(-2deg);
            box-shadow: 0 12px 30px rgba(2, 132, 199, 0.3);
        }

        .door:active {
            transform: scale(0.98);
        }

        .door-inner {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .door-number {
            position: absolute;
            top: 10px;
            left: 10px;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            color: #0c4a6e;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
            border: 2px solid #7dd3fc;
        }

        .door.opened .door-number {
            background: linear-gradient(135deg, #0284c7 0%, #0ea5e9 100%);
            color: white;
            border-color: #0369a1;
        }

        @media (min-width: 768px) {
            .door-number {
                width: 45px;
                height: 45px;
                font-size: 1.4rem;
            }
        }

        .door-icon {
            font-size: 3rem;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
        }

        @media (min-width: 768px) {
            .door-icon {
                font-size: 4rem;
            }
        }

        .door-checkmark {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
            font-weight: bold;
            box-shadow: 0 3px 10px rgba(16, 185, 129, 0.4);
            border: 2px solid #d1fae5;
        }

        .door.opened .door-checkmark {
            display: flex;
        }

        .door:not(.opened)::before {
            content: '‚ùÑÔ∏è';
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2rem;
            opacity: 0.6;
        }

        /* Message Box */
        .message-box {
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
            border-radius: 30px;
            padding: 30px;
            margin: 20px auto;
            max-width: 650px;
            display: none;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            border: 4px solid #7dd3fc;
        }

        .message-box:target {
            display: block;
        }

        .message-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .message-icon-wrapper {
            display: inline-block;
            padding: 25px;
            background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
            border-radius: 50%;
            margin-bottom: 15px;
            border: 3px solid #7dd3fc;
            box-shadow: 0 5px 15px rgba(2, 132, 199, 0.2);
        }

        .message-icon {
            font-size: 3rem;
        }

        .message-title {
            font-size: 2rem;
            color: #0c4a6e;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .message-content {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 25px;
            padding: 25px;
            margin-bottom: 25px;
            border: 2px solid #7dd3fc;
            box-shadow: inset 0 2px 8px rgba(2, 132, 199, 0.1);
        }

        .message-label {
            font-size: 1.3rem;
            color: #0c4a6e;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .message-text {
            font-size: 1.15rem;
            color: #0369a1;
            line-height: 1.7;
            font-weight: 500;
        }

        .message-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .close-button {
            flex: 1;
            min-width: 150px;
            background: linear-gradient(135deg, #0284c7 0%, #0ea5e9 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            text-decoration: none;
            text-align: center;
            transition: all 0.2s ease;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(2, 132, 199, 0.3);
        }

        .close-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(2, 132, 199, 0.4);
        }

        .close-button:active {
            transform: translateY(0);
        }

        .share-button {
            flex: 1;
            min-width: 150px;
            background: linear-gradient(135deg, #64748b 0%, #475569 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 12px rgba(100, 116, 139, 0.3);
        }

        .share-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(100, 116, 139, 0.4);
        }

        @media (min-width: 768px) {
            .message-box {
                padding: 40px;
            }
            .message-title {
                font-size: 2.5rem;
            }
            .message-content {
                padding: 30px;
            }
            .message-label {
                font-size: 1.5rem;
            }
            .message-text {
                font-size: 1.3rem;
            }
        }

        .footer {
            text-align: center;
            color: #0c4a6e;
            margin-top: 40px;
            font-size: 1rem;
            font-weight: 600;
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 15px;
            border: 2px solid #bae6fd;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #0ea5e9 0%, #38bdf8 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(2, 132, 199, 0.4);
            display: none;
            z-index: 1000;
            font-weight: 600;
            border: 2px solid #7dd3fc;
        }

        .toast.show {
            display: block;
            animation: slideInUp 0.3s ease;
        }

        @keyframes slideInUp {
            from {
                transform: translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Filter Buttons */
        .filter-section {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 25px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border: 3px solid #7dd3fc;
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            padding: 10px 18px;
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
            border: 2px solid #7dd3fc;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #0369a1;
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #0284c7 0%, #0ea5e9 100%);
            color: white;
            border-color: #0369a1;
            box-shadow: 0 4px 12px rgba(2, 132, 199, 0.3);
        }

        .filter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(2, 132, 199, 0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Christmas Quote Banner -->
        <div class="quote-banner">
            <div class="quote-text" id="quote-text">
                "Die sch√∂nste Zeit im Jahr ist die, die wir mit den Menschen verbringen, die wir lieben."
            </div>
        </div>

        <!-- Weather Section -->
        <div class="weather-section">
            <div class="weather-title">
                üå§Ô∏è Aktuelles Wetter in den Bergen
            </div>
            <div class="weather-loading" id="weather-loading">Wetterdaten werden geladen... ‚õ∑Ô∏è</div>
            <div class="weather-grid" id="weather-grid" style="display: none;"></div>
        </div>

        <div class="header">
            <h1>
                <span>‚õ∑Ô∏è F√ºr meine Johanna üèîÔ∏è</span>
            </h1>
            <p>24 Gr√ºnde, warum ich dich liebe</p>
            <div class="ski-icon">üéø</div>
        </div>

        <!-- Progress Section -->
        <div class="progress-section">
            <div class="progress-header">
                <div class="progress-title">
                    üö° Deine Ski-Tour
                </div>
                <div class="progress-stats">
                    <span id="opened-count">0</span> von 24 H√ºtten besucht
                </div>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progress-bar" style="width: 0%"></div>
                <div class="progress-percentage" id="progress-percentage">0%</div>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="stat-opened">0</div>
                    <div class="stat-label">üèîÔ∏è Besucht</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-remaining">24</div>
                    <div class="stat-label">‚õ∑Ô∏è Noch offen</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-streak">0</div>
                    <div class="stat-label">üî• Serie</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">‚ù§Ô∏è</div>
                    <div class="stat-label">üéø F√ºr dich</div>
                </div>
            </div>
        </div>

        <!-- Filter Section -->
        <div class="filter-section">
            <div class="filter-buttons">
                <button class="filter-btn active" onclick="filterDoors('all')">üèîÔ∏è Alle (24)</button>
                <button class="filter-btn" onclick="filterDoors('opened')">‚úÖ Besucht (<span id="filter-opened">0</span>)</button>
                <button class="filter-btn" onclick="filterDoors('unopened')">‚ùÑÔ∏è Unbesucht (<span id="filter-unopened">24</span>)</button>
            </div>
        </div>

        <!-- Calendar Grid -->
        <div class="calendar-grid" id="calendar"></div>

        <!-- Message Boxes -->
        <div id="messages-container"></div>

        <div class="footer">
            <p>‚õ∑Ô∏è Mit Liebe aus den Bergen f√ºr dich ‚ù§Ô∏è üèîÔ∏è</p>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script>
        const messages = [
            "wegen deinen Wortneusch√∂pfungen",
            "du immer so viel p√∂rpst",
            "wir auch manchmal Nachtisch d√ºrfen",
            "du immer so akrobatisch aus dem Bett aussteigst",
            "Spa√ügetr√§nke Partner-in-crime",
            "du so oft Lingerie tr√§gst",
            "du so toll GPUs von CPUs unterscheiden kannst",
            "du mir gezeigt hast wie man Tampons wechselt",
            "du echt in Ordnung Ski f√§hrst",
            "mit dir essen im Fokus steht",
            "dein 10 bis 60 min√ºtiges Abendprogramm mich immer entertained",
            "Bomboclat",
            "man mit dir selbst eine Zahnb√ºrste teilen kann",
            "du die Queen of Bowls bist",
            "wegen Scheide <3",
            "du dich immer so sch√§lst",
            "man nicht ohne Kussi einschlafen darf",
            "du so ne Beraterin bist",
            "man mit dir Dates im Sillsen haben kann",
            "man mit dir Fleischsalat Dates haben kann",
            "du so ne Lesemaus bist",
            "man dich so toll halten kann",
            "einfach weil alles mit dir cooler ist",
            "ich mich freue noch unz√§hlige weitere Weihnachten mit dir verbringen zu d√ºrfen"
        ];

        const christmasQuotes = [
            "Die sch√∂nste Zeit im Jahr ist die, die wir mit den Menschen verbringen, die wir lieben.",
            "Weihnachten ist nicht nur ein Tag im Dezember, sondern ein Gef√ºhl im Herzen.",
            "Das sch√∂nste Geschenk ist die Zeit, die wir gemeinsam verbringen.",
            "In der Weihnachtszeit z√§hlt nicht was unter dem Baum liegt, sondern wer darum herum steht.",
            "Weihnachten - die Zeit der stillen W√ºnsche und gro√üen Gef√ºhle."
        ];

        const skiIcons = ['üéø', 'üèÇ', '‚õ∑Ô∏è', 'üèîÔ∏è', '‚ùÑÔ∏è', 'üö°', 'üéø', 'üèÇ', '‚õ∑Ô∏è', 'üèîÔ∏è', '‚ùÑÔ∏è', 'üö°', 
                          'üéø', 'üèÇ', '‚õ∑Ô∏è', 'üèîÔ∏è', '‚ùÑÔ∏è', 'üö°', 'üéø', 'üèÇ', '‚õ∑Ô∏è', 'üèîÔ∏è', '‚ùÑÔ∏è', 'üö°'];

        let openedDoors = [];
        let currentFilter = 'all';

        // Random Christmas Quote
        function setRandomQuote() {
            const quote = christmasQuotes[Math.floor(Math.random() * christmasQuotes.length)];
            document.getElementById('quote-text').textContent = quote;
        }

        // Weather API Integration
        async function fetchWeather() {
            const locations = [
                { name: 'Innsbruck', lat: 47.2692, lon: 11.4041 },
                { name: 'Neustift', lat: 47.1167, lon: 11.3167 },
                { name: 'Axams', lat: 47.2333, lon: 11.2833 }
            ];

            const weatherGrid = document.getElementById('weather-grid');
            const weatherLoading = document.getElementById('weather-loading');

            try {
                // Fetch weather for each location sequentially
                for (const location of locations) {
                    try {
                        const url = `https://api.open-meteo.com/v1/forecast?latitude=${location.lat}&longitude=${location.lon}&current=temperature_2m,relative_humidity_2m,wind_speed_10m,weather_code&timezone=auto`;
                        
                        const response = await fetch(url);
                        
                        if (!response.ok) {
                            throw new Error('Network response was not ok');
                        }
                        
                        const data = await response.json();
                        
                        // Hide loading, show grid
                        weatherLoading.style.display = 'none';
                        weatherGrid.style.display = 'grid';
                        
                        const temp = Math.round(data.current.temperature_2m);
                        const humidity = data.current.relative_humidity_2m;
                        const windSpeed = Math.round(data.current.wind_speed_10m);
                        const weatherCode = data.current.weather_code;
                        
                        const weatherInfo = getWeatherInfo(weatherCode);
                        
                        const card = document.createElement('div');
                        card.className = 'weather-card';
                        card.innerHTML = `
                            <div class="weather-location">${location.name}</div>
                            <div class="weather-icon">${weatherInfo.icon}</div>
                            <div class="weather-temp">${temp}¬∞C</div>
                            <div class="weather-description">${weatherInfo.description}</div>
                            <div class="weather-details">
                                <div class="weather-detail">
                                    <div class="weather-detail-icon">üíß</div>
                                    <div class="weather-detail-value">${humidity}%</div>
                                </div>
                                <div class="weather-detail">
                                    <div class="weather-detail-icon">üí®</div>
                                    <div class="weather-detail-value">${windSpeed} km/h</div>
                                </div>
                            </div>
                        `;
                        weatherGrid.appendChild(card);
                        
                    } catch (error) {
                        console.error(`Error fetching weather for ${location.name}:`, error);
                        // Continue with next location even if one fails
                    }
                }
                
                // If no cards were added, show error
                if (weatherGrid.children.length === 0) {
                    weatherLoading.innerHTML = '<div class="weather-error">‚ö†Ô∏è Wetterdaten konnten nicht geladen werden. Bitte Internetverbindung pr√ºfen.</div>';
                }
                
            } catch (error) {
                console.error('Weather fetch error:', error);
                weatherLoading.innerHTML = '<div class="weather-error">‚ö†Ô∏è Wetterdaten konnten nicht geladen werden</div>';
            }
        }

        function getWeatherInfo(code) {
            const weatherCodes = {
                0: { icon: '‚òÄÔ∏è', description: 'Sonnig' },
                1: { icon: 'üå§Ô∏è', description: 'Meist sonnig' },
                2: { icon: '‚õÖ', description: 'Teilweise bew√∂lkt' },
                3: { icon: '‚òÅÔ∏è', description: 'Bew√∂lkt' },
                45: { icon: 'üå´Ô∏è', description: 'Nebelig' },
                48: { icon: 'üå´Ô∏è', description: 'Nebelig' },
                51: { icon: 'üåßÔ∏è', description: 'Leichter Nieselregen' },
                53: { icon: 'üåßÔ∏è', description: 'Nieselregen' },
                55: { icon: 'üåßÔ∏è', description: 'Starker Nieselregen' },
                61: { icon: 'üåßÔ∏è', description: 'Leichter Regen' },
                63: { icon: 'üåßÔ∏è', description: 'Regen' },
                65: { icon: 'üåßÔ∏è', description: 'Starker Regen' },
                71: { icon: 'üå®Ô∏è', description: 'Leichter Schneefall' },
                73: { icon: 'üå®Ô∏è', description: 'Schneefall' },
                75: { icon: 'üå®Ô∏è', description: 'Starker Schneefall' },
                77: { icon: '‚ùÑÔ∏è', description: 'Schneegriesel' },
                80: { icon: 'üå¶Ô∏è', description: 'Leichte Schauer' },
                81: { icon: 'üå¶Ô∏è', description: 'Schauer' },
                82: { icon: 'üå¶Ô∏è', description: 'Starke Schauer' },
                85: { icon: 'üå®Ô∏è', description: 'Schneeschauer' },
                86: { icon: 'üå®Ô∏è', description: 'Starke Schneeschauer' },
                95: { icon: '‚õàÔ∏è', description: 'Gewitter' },
                96: { icon: '‚õàÔ∏è', description: 'Gewitter mit Hagel' },
                99: { icon: '‚õàÔ∏è', description: 'Starkes Gewitter' }
            };
            return weatherCodes[code] || { icon: 'üå§Ô∏è', description: 'Wechselhaft' };
        }

        function loadOpenedDoors() {
            const saved = localStorage.getItem('adventCalendarJohanna');
            return saved ? JSON.parse(saved) : [];
        }

        function saveOpenedDoors(doors) {
            localStorage.setItem('adventCalendarJohanna', JSON.stringify(doors));
        }

        function updateProgress() {
            openedDoors = loadOpenedDoors();
            const count = openedDoors.length;
            const percentage = Math.round((count / 24) * 100);
            
            document.getElementById('opened-count').textContent = count;
            document.getElementById('progress-bar').style.width = percentage + '%';
            document.getElementById('progress-percentage').textContent = percentage + '%';
            
            document.getElementById('stat-opened').textContent = count;
            document.getElementById('stat-remaining').textContent = 24 - count;
            document.getElementById('stat-streak').textContent = calculateStreak();
            
            document.getElementById('filter-opened').textContent = count;
            document.getElementById('filter-unopened').textContent = 24 - count;
        }

        function calculateStreak() {
            if (openedDoors.length === 0) return 0;
            const sorted = [...openedDoors].sort((a, b) => a - b);
            let streak = 1;
            let current = 1;
            
            for (let i = 1; i < sorted.length; i++) {
                if (sorted[i] === sorted[i-1] + 1) {
                    current++;
                    streak = Math.max(streak, current);
                } else {
                    current = 1;
                }
            }
            return streak;
        }

        function createCalendar() {
            const calendar = document.getElementById('calendar');
            calendar.innerHTML = '';
            
            for (let i = 1; i <= 24; i++) {
                const isOpened = openedDoors.includes(i);
                
                if (currentFilter === 'opened' && !isOpened) continue;
                if (currentFilter === 'unopened' && isOpened) continue;
                
                const door = document.createElement('a');
                door.href = '#message' + i;
                door.className = isOpened ? 'door opened' : 'door';
                door.onclick = () => markAsOpened(i);
                
                door.innerHTML = `
                    <div class="door-inner">
                        <div class="door-number">${i}</div>
                        <div class="door-icon">${isOpened ? skiIcons[i-1] : 'üèîÔ∏è'}</div>
                        <div class="door-checkmark">‚úì</div>
                    </div>
                `;
                
                calendar.appendChild(door);
            }
        }

        function createMessages() {
            const container = document.getElementById('messages-container');
            container.innerHTML = '';
            
            for (let i = 1; i <= 24; i++) {
                const messageBox = document.createElement('div');
                messageBox.id = 'message' + i;
                messageBox.className = 'message-box';
                
                messageBox.innerHTML = `
                    <div class="message-header">
                        <div class="message-icon-wrapper">
                            <div class="message-icon">${skiIcons[i-1]}</div>
                        </div>
                        <h2 class="message-title">Berg-H√ºtte ${i}</h2>
                    </div>
                    <div class="message-content">
                        <p class="message-label">Ich liebe dich, weil...</p>
                        <p class="message-text">${messages[i-1]}</p>
                    </div>
                    <div class="message-actions">
                        <a href="#" class="close-button">Danke, mein Schatz! ‚õ∑Ô∏è</a>
                        <button class="share-button" onclick="shareMessage(${i})">üì§ Teilen</button>
                    </div>
                `;
                
                container.appendChild(messageBox);
            }
        }

        function markAsOpened(doorNumber) {
            if (!openedDoors.includes(doorNumber)) {
                openedDoors.push(doorNumber);
                saveOpenedDoors(openedDoors);
                updateProgress();
                createCalendar();
                showToast('Berg-H√ºtte ' + doorNumber + ' besucht! ‚õ∑Ô∏è');
            }
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function filterDoors(filter) {
            currentFilter = filter;
            
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            createCalendar();
        }

        function shareMessage(doorNumber) {
            const message = `Berg-H√ºtte ${doorNumber}: Ich liebe dich, weil ${messages[doorNumber-1]} ‚õ∑Ô∏è‚ù§Ô∏è`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Ski-Adventskalender',
                    text: message
                }).catch(() => {});
            } else {
                navigator.clipboard.writeText(message).then(() => {
                    showToast('In Zwischenablage kopiert! üìã');
                });
            }
        }

        // Initialize
        setRandomQuote();
        fetchWeather();
        openedDoors = loadOpenedDoors();
        updateProgress();
        createCalendar();
        createMessages();
    </script>
</body>
</html>