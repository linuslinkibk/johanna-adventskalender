<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ski-Adventskalender f√ºr Johanna ‚õ∑Ô∏è</title>
    
    <!-- iOS Home Screen Icon -->
    <link rel="apple-touch-icon" href="icon-180.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Ski-Advent">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(180deg, #0ea5e9 0%, #38bdf8 30%, #e0f2fe 60%, #ffffff 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::after {
            content: '';
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 150px;
            background: linear-gradient(180deg, transparent 0%, #ffffff 40%, #f0f9ff 100%);
            pointer-events: none;
            z-index: 0;
        }

        body::before {
            content: '';
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 300px;
            background: 
                linear-gradient(135deg, transparent 30%, #94a3b8 30%, #cbd5e1 50%, #f1f5f9 70%),
                linear-gradient(225deg, transparent 30%, #64748b 30%, #94a3b8 50%, #e2e8f0 70%);
            background-size: 50% 100%;
            background-position: left bottom, right bottom;
            background-repeat: no-repeat;
            opacity: 0.3;
            pointer-events: none;
            z-index: 0;
        }

        /* Animated Snowflakes */
        .snowflake {
            position: fixed;
            top: -10px;
            color: white;
            font-size: 1rem;
            opacity: 0.8;
            pointer-events: none;
            z-index: 9999;
            animation: fall linear infinite;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
        }

        @keyframes fall {
            to {
                transform: translateY(105vh) rotate(360deg);
            }
        }

        html {
            scroll-behavior: smooth;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        /* Christmas Quote Banner */
        .quote-banner {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 50%, #991b1b 100%);
            color: white;
            padding: 20px 25px;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(220, 38, 38, 0.3);
            border: 3px solid #fca5a5;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .quote-banner::before {
            content: '‚ùÑÔ∏è';
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2rem;
            opacity: 0.5;
        }

        .quote-banner::after {
            content: '‚ùÑÔ∏è';
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2rem;
            opacity: 0.5;
        }

        .quote-text {
            font-size: 1.1rem;
            font-style: italic;
            font-weight: 500;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            line-height: 1.5;
        }

        @media (min-width: 768px) {
            .quote-text {
                font-size: 1.3rem;
            }
        }

        /* Snow Depth Section */
        .snow-section {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 25px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border: 3px solid #7dd3fc;
        }

        .snow-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #0c4a6e;
            margin-bottom: 15px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .snow-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        @media (min-width: 768px) {
            .snow-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .snow-card {
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
            padding: 20px;
            border-radius: 20px;
            text-align: center;
            border: 3px solid #7dd3fc;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .snow-location {
            font-size: 1.2rem;
            font-weight: bold;
            color: #0c4a6e;
            margin-bottom: 10px;
        }

        .snow-icon {
            font-size: 3rem;
            margin: 10px 0;
        }

        .snow-depth {
            font-size: 2.5rem;
            font-weight: bold;
            color: #0284c7;
            margin: 10px 0;
        }

        .snow-label {
            font-size: 1rem;
            color: #0369a1;
            font-weight: 500;
            margin-bottom: 10px;
        }

        .snow-status {
            display: inline-block;
            padding: 8px 16px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-top: 10px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 30px;
            color: #0c4a6e;
            background: rgba(255, 255, 255, 0.9);
            padding: 30px 20px;
            border-radius: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 3px solid #bae6fd;
            position: relative;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.8);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-top: 10px;
            color: #0369a1;
        }

        .ski-icon {
            font-size: 2.5rem;
            margin: 15px 0;
        }

        @media (min-width: 768px) {
            .header h1 {
                font-size: 3rem;
            }
            .header p {
                font-size: 1.5rem;
            }
        }

        /* Music Player */
        .music-player {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .music-toggle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            border: 3px solid #fca5a5;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
        }

        .music-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(220, 38, 38, 0.4);
        }

        .music-toggle:active {
            transform: scale(0.95);
        }

        .music-toggle.playing {
            animation: musicPulse 1s ease-in-out infinite;
        }

        @keyframes musicPulse {
            0%, 100% {
                box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
            }
            50% {
                box-shadow: 0 4px 20px rgba(220, 38, 38, 0.6), 0 0 30px rgba(220, 38, 38, 0.4);
            }
        }

        .music-label {
            background: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            color: #dc2626;
            border: 2px solid #fca5a5;
            display: none;
        }

        @media (min-width: 768px) {
            .music-label {
                display: block;
            }
        }

        /* Progress Section */
        .progress-section {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 25px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border: 3px solid #7dd3fc;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .progress-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: #0c4a6e;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .progress-stats {
            font-size: 1.1rem;
            color: #0369a1;
            font-weight: 600;
        }

        .progress-bar-container {
            width: 100%;
            height: 35px;
            background: linear-gradient(180deg, #bae6fd 0%, #e0f2fe 100%);
            border-radius: 20px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 3px 6px rgba(0, 0, 0, 0.15);
            border: 2px solid #7dd3fc;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #0284c7 0%, #0ea5e9 50%, #38bdf8 100%);
            border-radius: 18px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(2, 132, 199, 0.4);
        }

        .progress-bar::after {
            content: '‚õ∑Ô∏è';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
        }

        .progress-percentage {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            color: #0c4a6e;
            font-size: 0.95rem;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        @media (min-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .stat-card {
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
            padding: 15px;
            border-radius: 20px;
            text-align: center;
            border: 3px solid #7dd3fc;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #0284c7;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #0c4a6e;
            font-weight: 600;
        }

        /* Calendar Grid */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 40px;
        }

        @media (min-width: 500px) {
            .calendar-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 15px;
            }
        }

        @media (min-width: 768px) {
            .calendar-grid {
                grid-template-columns: repeat(6, 1fr);
                gap: 20px;
            }
        }

        .door {
            aspect-ratio: 1;
            border-radius: 20px;
            position: relative;
            border: 4px solid #7dd3fc;
            overflow: hidden;
            text-decoration: none;
            display: block;
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 50%, #e0f2fe 100%);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15), inset 0 2px 8px rgba(255, 255, 255, 0.5);
            transition: all 0.2s ease;
        }

        .door.opened {
            background: linear-gradient(135deg, #0ea5e9 0%, #38bdf8 50%, #7dd3fc 100%);
            border-color: #0284c7;
        }

        .door.has-comment::after {
            content: 'üí¨';
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.2rem;
        }

        .door:hover {
            transform: scale(1.05) translateY(-5px) rotate(-2deg);
            box-shadow: 0 12px 30px rgba(2, 132, 199, 0.3);
        }

        .door:active {
            transform: scale(0.98);
        }

        .door-inner {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .door-number {
            position: absolute;
            top: 10px;
            left: 10px;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            color: #0c4a6e;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
            border: 2px solid #7dd3fc;
        }

        .door.opened .door-number {
            background: linear-gradient(135deg, #0284c7 0%, #0ea5e9 100%);
            color: white;
            border-color: #0369a1;
        }

        @media (min-width: 768px) {
            .door-number {
                width: 45px;
                height: 45px;
                font-size: 1.4rem;
            }
        }

        .door-icon {
            font-size: 3rem;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
        }

        @media (min-width: 768px) {
            .door-icon {
                font-size: 4rem;
            }
        }

        .door-checkmark {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-radius: 50%;
            display: none;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
            font-weight: bold;
            box-shadow: 0 3px 10px rgba(16, 185, 129, 0.4);
            border: 2px solid #d1fae5;
        }

        .door.opened .door-checkmark {
            display: flex;
        }

        .door:not(.opened)::before {
            content: '‚ùÑÔ∏è';
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2rem;
            opacity: 0.6;
        }

        /* Message Box */
        .message-box {
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
            border-radius: 30px;
            padding: 30px;
            margin: 20px auto;
            max-width: 650px;
            display: none;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            border: 4px solid #7dd3fc;
        }

        .message-box:target {
            display: block;
        }

        .message-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .message-icon-wrapper {
            display: inline-block;
            padding: 25px;
            background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
            border-radius: 50%;
            margin-bottom: 15px;
            border: 3px solid #7dd3fc;
            box-shadow: 0 5px 15px rgba(2, 132, 199, 0.2);
        }

        .message-icon {
            font-size: 3rem;
        }

        .message-title {
            font-size: 2rem;
            color: #0c4a6e;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .message-content {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 25px;
            padding: 25px;
            margin-bottom: 25px;
            border: 2px solid #7dd3fc;
            box-shadow: inset 0 2px 8px rgba(2, 132, 199, 0.1);
        }

        .message-label {
            font-size: 1.3rem;
            color: #0c4a6e;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .message-text {
            font-size: 1.15rem;
            color: #0369a1;
            line-height: 1.7;
            font-weight: 500;
        }

        /* Comment Section */
        .comment-section {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-radius: 25px;
            padding: 20px;
            margin-bottom: 25px;
            border: 3px solid #fbbf24;
        }

        .comment-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #92400e;
        }

        .comment-display {
            background: white;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 15px;
            min-height: 60px;
            color: #374151;
            font-size: 1rem;
            line-height: 1.6;
            border: 2px solid #fbbf24;
        }

        .comment-display.empty {
            color: #9ca3af;
            font-style: italic;
        }

        .comment-input {
            width: 100%;
            padding: 12px;
            border-radius: 15px;
            border: 2px solid #fbbf24;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            min-height: 80px;
            margin-bottom: 10px;
        }

        .comment-input:focus {
            outline: none;
            border-color: #f59e0b;
            box-shadow: 0 0 0 3px rgba(251, 191, 36, 0.2);
        }

        .comment-buttons {
            display: flex;
            gap: 10px;
        }

        .comment-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.95rem;
        }

        .comment-btn-save {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            flex: 1;
        }

        .comment-btn-save:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .comment-btn-cancel {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }

        .comment-btn-cancel:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }

        .comment-btn-edit {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            width: 100%;
        }

        .comment-btn-edit:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
        }

        .message-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .close-button {
            flex: 1;
            min-width: 150px;
            background: linear-gradient(135deg, #0284c7 0%, #0ea5e9 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            text-decoration: none;
            text-align: center;
            transition: all 0.2s ease;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(2, 132, 199, 0.3);
        }

        .close-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(2, 132, 199, 0.4);
        }

        .close-button:active {
            transform: translateY(0);
        }

        .share-button {
            flex: 1;
            min-width: 150px;
            background: linear-gradient(135deg, #64748b 0%, #475569 100%);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 12px rgba(100, 116, 139, 0.3);
        }

        .share-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(100, 116, 139, 0.4);
        }

        @media (min-width: 768px) {
            .message-box {
                padding: 40px;
            }
            .message-title {
                font-size: 2.5rem;
            }
            .message-content {
                padding: 30px;
            }
            .message-label {
                font-size: 1.5rem;
            }
            .message-text {
                font-size: 1.3rem;
            }
        }

        .footer {
            text-align: center;
            color: #0c4a6e;
            margin-top: 40px;
            font-size: 1rem;
            font-weight: 600;
            background: rgba(255, 255, 255, 0.8);
            padding: 15px;
            border-radius: 15px;
            border: 2px solid #bae6fd;
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #0ea5e9 0%, #38bdf8 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(2, 132, 199, 0.4);
            display: none;
            z-index: 1000;
            font-weight: 600;
            border: 2px solid #7dd3fc;
        }

        .toast.show {
            display: block;
            animation: slideInUp 0.3s ease;
        }

        @keyframes slideInUp {
            from {
                transform: translateY(100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Filter Buttons */
        .filter-section {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 25px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border: 3px solid #7dd3fc;
        }

        .filter-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .filter-btn {
            padding: 10px 18px;
            background: linear-gradient(135deg, #ffffff 0%, #f0f9ff 100%);
            border: 2px solid #7dd3fc;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #0369a1;
        }

        .filter-btn.active {
            background: linear-gradient(135deg, #0284c7 0%, #0ea5e9 100%);
            color: white;
            border-color: #0369a1;
            box-shadow: 0 4px 12px rgba(2, 132, 199, 0.3);
        }

        .filter-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(2, 132, 199, 0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Christmas Quote Banner -->
        <div class="quote-banner">
            <div class="quote-text" id="quote-text">
                "Die sch√∂nste Zeit im Jahr ist die, die wir mit den Menschen verbringen, die wir lieben."
            </div>
        </div>

        <!-- Snow Depth Section -->
        <div class="snow-section">
            <div class="snow-title">
                ‚ùÑÔ∏è Aktuelle Schneeh√∂hen
            </div>
            <div class="snow-grid">
                <div class="snow-card">
                    <div class="snow-location">Innsb√∂rg Hausb√∂rg</div>
                    <div class="snow-icon">üèîÔ∏è</div>
                    <div class="snow-depth">85 cm</div>
                    <div class="snow-label">Tal ‚Ä¢ 120 cm Berg</div>
                    <div class="snow-status">‚úÖ Perfekte Bedingungen</div>
                </div>
                <div class="snow-card">
                    <div class="snow-location">Stubaier Gletscher</div>
                    <div class="snow-icon">‚õ∑Ô∏è</div>
                    <div class="snow-depth">145 cm</div>
                    <div class="snow-label">Tal ‚Ä¢ 280 cm Berg</div>
                    <div class="snow-status">‚úÖ Traumhaft</div>
                </div>
                <div class="snow-card">
                    <div class="snow-location">Axamer Lizum</div>
                    <div class="snow-icon">üéø</div>
                    <div class="snow-depth">75 cm</div>
                    <div class="snow-label">Tal ‚Ä¢ 110 cm Berg</div>
                    <div class="snow-status">‚úÖ Sehr gut</div>
                </div>
            </div>
        </div>

        <div class="header">
            <div class="music-player">
                <div class="music-label" id="music-label">üéµ Musik aus</div>
                <button class="music-toggle" id="music-toggle" onclick="toggleMusic()">
                    üéµ
                </button>
            </div>
            <h1>
                <span>‚õ∑Ô∏è F√ºr meine Johanna üèîÔ∏è</span>
            </h1>
            <p>24 Gr√ºnde, warum ich dich liebe</p>
            <div class="ski-icon">üéø</div>
        </div>

        <!-- Hidden Audio Element -->
        <audio id="christmas-music" loop>
            <source src="./Chaingeil__feat__FreeRainer_.mp3" type="audio/mpeg">
        </audio>

        <!-- Progress Section -->
        <div class="progress-section">
            <div class="progress-header">
                <div class="progress-title">
                    üö° Deine Ski-Tour
                </div>
                <div class="progress-stats">
                    <span id="opened-count">0</span> von 24 H√ºtten besucht
                </div>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progress-bar" style="width: 0%"></div>
                <div class="progress-percentage" id="progress-percentage">0%</div>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="stat-opened">0</div>
                    <div class="stat-label">üèîÔ∏è Besucht</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-remaining">24</div>
                    <div class="stat-label">‚õ∑Ô∏è Noch offen</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-streak">0</div>
                    <div class="stat-label">üî• Serie</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-comments">0</div>
                    <div class="stat-label">üí¨ Kommentare</div>
                </div>
            </div>
        </div>

        <!-- Filter Section -->
        <div class="filter-section">
            <div class="filter-buttons">
                <button class="filter-btn active" onclick="filterDoors('all')">üèîÔ∏è Alle (24)</button>
                <button class="filter-btn" onclick="filterDoors('opened')">‚úÖ Besucht (<span id="filter-opened">0</span>)</button>
                <button class="filter-btn" onclick="filterDoors('unopened')">‚ùÑÔ∏è Unbesucht (<span id="filter-unopened">24</span>)</button>
            </div>
        </div>

        <!-- Calendar Grid -->
        <div class="calendar-grid" id="calendar"></div>

        <!-- Message Boxes -->
        <div id="messages-container"></div>

        <div class="footer">
            <p>‚õ∑Ô∏è Mit Liebe aus den Bergen f√ºr dich ‚ù§Ô∏è üèîÔ∏è</p>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script>
        const messages = [
            "wegen deinen Wortneusch√∂pfungen",
            "du immer so viel p√∂rpst",
            "wir auch manchmal Nachtisch d√ºrfen",
            "du immer so akrobatisch aus dem Bett aussteigst",
            "Spa√ügetr√§nke Partner-in-crime",
            "du so oft Lingerie tr√§gst",
            "du so toll GPUs von CPUs unterscheiden kannst",
            "du mir gezeigt hast wie man Tampons wechselt",
            "du echt in Ordnung Ski f√§hrst",
            "mit dir essen im Fokus steht",
            "dein 10 bis 60 min√ºtiges Abendprogramm mich immer entertained",
            "Bomboclat",
            "man mit dir selbst eine Zahnb√ºrste teilen kann",
            "du die Queen of Bowls bist",
            "wegen Scheide <3",
            "du dich immer so sch√§lst",
            "man nicht ohne Kussi einschlafen darf",
            "du so ne Beraterin bist",
            "man mit dir Dates im Sillsen haben kann",
            "man mit dir Fleischsalat Dates haben kann",
            "du so ne Lesemaus bist",
            "man dich so toll halten kann",
            "einfach weil alles mit dir cooler ist",
            "ich mich freue noch unz√§hlige weitere Weihnachten mit dir verbringen zu d√ºrfen"
        ];

        const christmasQuotes = [
            "Die sch√∂nste Zeit im Jahr ist die, die wir mit den Menschen verbringen, die wir lieben.",
            "Weihnachten ist nicht nur ein Tag im Dezember, sondern ein Gef√ºhl im Herzen.",
            "Das sch√∂nste Geschenk ist die Zeit, die wir gemeinsam verbringen.",
            "In der Weihnachtszeit z√§hlt nicht was unter dem Baum liegt, sondern wer darum herum steht.",
            "Weihnachten - die Zeit der stillen W√ºnsche und gro√üen Gef√ºhle."
        ];

        const skiIcons = ['üéø', 'üèÇ', '‚õ∑Ô∏è', 'üèîÔ∏è', '‚ùÑÔ∏è', 'üö°', 'üéø', 'üèÇ', '‚õ∑Ô∏è', 'üèîÔ∏è', '‚ùÑÔ∏è', 'üö°', 
                          'üéø', 'üèÇ', '‚õ∑Ô∏è', 'üèîÔ∏è', '‚ùÑÔ∏è', 'üö°', 'üéø', 'üèÇ', '‚õ∑Ô∏è', 'üèîÔ∏è', '‚ùÑÔ∏è', 'üö°'];

        let openedDoors = [];
        let doorComments = {};
        let currentFilter = 'all';
        let editingComment = null;
        let musicPlaying = false;

        // Music player functions
        function toggleMusic() {
            const audio = document.getElementById('christmas-music');
            const button = document.getElementById('music-toggle');
            const label = document.getElementById('music-label');
            
            if (musicPlaying) {
                audio.pause();
                button.textContent = 'üéµ';
                button.classList.remove('playing');
                label.textContent = 'üéµ Musik aus';
                musicPlaying = false;
            } else {
                // Set start time to 11 seconds if at beginning
                if (audio.currentTime < 11) {
                    audio.currentTime = 11;
                }
                audio.play().catch(err => {
                    console.log('Audio play failed:', err);
                    showToast('Musik konnte nicht abgespielt werden üéµ');
                });
                button.textContent = '‚è∏Ô∏è';
                button.classList.add('playing');
                label.textContent = 'üéµ Musik l√§uft';
                musicPlaying = true;
            }
        }
        
        // When audio loops, start at 11 seconds
        document.addEventListener('DOMContentLoaded', function() {
            const audio = document.getElementById('christmas-music');
            audio.addEventListener('ended', function() {
                if (musicPlaying) {
                    audio.currentTime = 11;
                    audio.play();
                }
            });
        });

        // Create animated snowflakes
        function createSnowflakes() {
            const snowflakeCount = 50;
            for (let i = 0; i < snowflakeCount; i++) {
                const snowflake = document.createElement('div');
                snowflake.classList.add('snowflake');
                snowflake.textContent = '‚ùÑ';
                snowflake.style.left = Math.random() * 100 + '%';
                snowflake.style.animationDuration = (Math.random() * 10 + 15) + 's';
                snowflake.style.animationDelay = (Math.random() * 5) + 's';
                snowflake.style.fontSize = (Math.random() * 0.8 + 0.8) + 'rem';
                snowflake.style.opacity = Math.random() * 0.6 + 0.4;
                document.body.appendChild(snowflake);
            }
        }

        function setRandomQuote() {
            const quote = christmasQuotes[Math.floor(Math.random() * christmasQuotes.length)];
            document.getElementById('quote-text').textContent = quote;
        }

        function loadOpenedDoors() {
            const saved = localStorage.getItem('adventCalendarJohanna');
            return saved ? JSON.parse(saved) : [];
        }

        function saveOpenedDoors(doors) {
            localStorage.setItem('adventCalendarJohanna', JSON.stringify(doors));
        }

        function loadComments() {
            const saved = localStorage.getItem('adventCalendarComments');
            return saved ? JSON.parse(saved) : {};
        }

        function saveComments(comments) {
            localStorage.setItem('adventCalendarComments', JSON.stringify(comments));
        }

        function updateProgress() {
            openedDoors = loadOpenedDoors();
            doorComments = loadComments();
            
            const count = openedDoors.length;
            const percentage = Math.round((count / 24) * 100);
            const commentCount = Object.keys(doorComments).filter(key => doorComments[key]).length;
            
            document.getElementById('opened-count').textContent = count;
            document.getElementById('progress-bar').style.width = percentage + '%';
            document.getElementById('progress-percentage').textContent = percentage + '%';
            
            document.getElementById('stat-opened').textContent = count;
            document.getElementById('stat-remaining').textContent = 24 - count;
            document.getElementById('stat-streak').textContent = calculateStreak();
            document.getElementById('stat-comments').textContent = commentCount;
            
            document.getElementById('filter-opened').textContent = count;
            document.getElementById('filter-unopened').textContent = 24 - count;
        }

        function calculateStreak() {
            if (openedDoors.length === 0) return 0;
            const sorted = [...openedDoors].sort((a, b) => a - b);
            let streak = 1;
            let current = 1;
            
            for (let i = 1; i < sorted.length; i++) {
                if (sorted[i] === sorted[i-1] + 1) {
                    current++;
                    streak = Math.max(streak, current);
                } else {
                    current = 1;
                }
            }
            return streak;
        }

        function createCalendar() {
            const calendar = document.getElementById('calendar');
            calendar.innerHTML = '';
            
            for (let i = 1; i <= 24; i++) {
                const isOpened = openedDoors.includes(i);
                const hasComment = doorComments[i] && doorComments[i].trim() !== '';
                
                if (currentFilter === 'opened' && !isOpened) continue;
                if (currentFilter === 'unopened' && isOpened) continue;
                
                const door = document.createElement('a');
                door.href = '#message' + i;
                door.className = 'door' + (isOpened ? ' opened' : '') + (hasComment ? ' has-comment' : '');
                door.onclick = () => markAsOpened(i);
                
                door.innerHTML = `
                    <div class="door-inner">
                        <div class="door-number">${i}</div>
                        <div class="door-icon">${isOpened ? skiIcons[i-1] : 'üèîÔ∏è'}</div>
                        <div class="door-checkmark">‚úì</div>
                    </div>
                `;
                
                calendar.appendChild(door);
            }
        }

        function createMessages() {
            const container = document.getElementById('messages-container');
            container.innerHTML = '';
            
            for (let i = 1; i <= 24; i++) {
                const messageBox = document.createElement('div');
                messageBox.id = 'message' + i;
                messageBox.className = 'message-box';
                
                const comment = doorComments[i] || '';
                const hasComment = comment.trim() !== '';
                
                messageBox.innerHTML = `
                    <div class="message-header">
                        <div class="message-icon-wrapper">
                            <div class="message-icon">${skiIcons[i-1]}</div>
                        </div>
                        <h2 class="message-title">Berg-H√ºtte ${i}</h2>
                    </div>
                    <div class="message-content">
                        <p class="message-label">Ich liebe dich, weil...</p>
                        <p class="message-text">${messages[i-1]}</p>
                    </div>
                    
                    <div class="comment-section">
                        <div class="comment-header">
                            üí¨ Deine Gedanken
                        </div>
                        <div class="comment-display ${!hasComment ? 'empty' : ''}" id="comment-display-${i}">
                            ${hasComment ? comment : 'Noch kein Kommentar... Schreib was dazu! üí≠'}
                        </div>
                        <div id="comment-edit-${i}" style="display: none;">
                            <textarea class="comment-input" id="comment-input-${i}" placeholder="Schreib hier deine Gedanken...">${comment}</textarea>
                            <div class="comment-buttons">
                                <button class="comment-btn comment-btn-save" onclick="saveComment(${i})">üíæ Speichern</button>
                                <button class="comment-btn comment-btn-cancel" onclick="cancelEdit(${i})">‚ùå Abbrechen</button>
                            </div>
                        </div>
                        <button class="comment-btn comment-btn-edit" id="comment-btn-${i}" onclick="editComment(${i})">‚úèÔ∏è ${hasComment ? 'Bearbeiten' : 'Kommentar hinzuf√ºgen'}</button>
                    </div>
                    
                    <div class="message-actions">
                        <a href="#" class="close-button">Danke, mein Schatz! ‚õ∑Ô∏è</a>
                        <button class="share-button" onclick="shareMessage(${i})">üì§ Teilen</button>
                    </div>
                `;
                
                container.appendChild(messageBox);
            }
        }

        function editComment(doorNumber) {
            document.getElementById('comment-display-' + doorNumber).style.display = 'none';
            document.getElementById('comment-edit-' + doorNumber).style.display = 'block';
            document.getElementById('comment-btn-' + doorNumber).style.display = 'none';
            document.getElementById('comment-input-' + doorNumber).focus();
            editingComment = doorNumber;
        }

        function cancelEdit(doorNumber) {
            document.getElementById('comment-display-' + doorNumber).style.display = 'block';
            document.getElementById('comment-edit-' + doorNumber).style.display = 'none';
            document.getElementById('comment-btn-' + doorNumber).style.display = 'block';
            editingComment = null;
        }

        function saveComment(doorNumber) {
            const comment = document.getElementById('comment-input-' + doorNumber).value;
            doorComments[doorNumber] = comment;
            saveComments(doorComments);
            
            const hasComment = comment.trim() !== '';
            const displayEl = document.getElementById('comment-display-' + doorNumber);
            displayEl.textContent = hasComment ? comment : 'Noch kein Kommentar... Schreib was dazu! üí≠';
            displayEl.className = 'comment-display' + (!hasComment ? ' empty' : '');
            
            document.getElementById('comment-btn-' + doorNumber).textContent = '‚úèÔ∏è ' + (hasComment ? 'Bearbeiten' : 'Kommentar hinzuf√ºgen');
            
            cancelEdit(doorNumber);
            updateProgress();
            createCalendar();
            showToast(hasComment ? 'Kommentar gespeichert! üí¨' : 'Kommentar gel√∂scht!');
        }

        function markAsOpened(doorNumber) {
            if (!openedDoors.includes(doorNumber)) {
                openedDoors.push(doorNumber);
                saveOpenedDoors(openedDoors);
                updateProgress();
                createCalendar();
                showToast('Berg-H√ºtte ' + doorNumber + ' besucht! ‚õ∑Ô∏è');
            }
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        function filterDoors(filter) {
            currentFilter = filter;
            
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            createCalendar();
        }

        function shareMessage(doorNumber) {
            const comment = doorComments[doorNumber];
            let message = `Berg-H√ºtte ${doorNumber}: Ich liebe dich, weil ${messages[doorNumber-1]} ‚õ∑Ô∏è‚ù§Ô∏è`;
            
            if (comment && comment.trim() !== '') {
                message += `\n\nMeine Gedanken: ${comment}`;
            }
            
            if (navigator.share) {
                navigator.share({
                    title: 'Ski-Adventskalender',
                    text: message
                }).catch(() => {});
            } else {
                navigator.clipboard.writeText(message).then(() => {
                    showToast('In Zwischenablage kopiert! üìã');
                });
            }
        }

        // Initialize
        createSnowflakes();
        setRandomQuote();
        doorComments = loadComments();
        openedDoors = loadOpenedDoors();
        updateProgress();
        createCalendar();
        createMessages();
    </script>
</body>
</html>